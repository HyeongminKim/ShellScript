### Idle configuration
#
# Example configuration:
#
# exec swayidle -w \
#          timeout 300 'swaylock -efF --clock -i `find $HOME/Pictures/Wallpaper-Bank/wallpapers -type f | shuf -n 1`' \
#          timeout 600 'swaymsg "output * power off"' resume 'swaymsg "output * power on"' \
#          timeout 60 'if pgrep -x swaylock; then systemctl suspend-then-hibernate; fi' \
#          before-sleep 'swaylock -efF --clock -i `find $HOME/Pictures/Wallpaper-Bank/wallpapers -type f | shuf -n 1`'

exec_always (killall swayidle || true) && swayidle -w \
    timeout 15 '\
        if pgrep -x swaylock; then \
            swaymsg "output * dpms off"; \
            if [[ $(playerctl status 2> /dev/null) == "Playing" ]]; then\
                playerctl pause; \
            fi;\
        fi\
    ' resume 'swaymsg "output * dpms on" && "~/.config/sway/src/weather --reload"'\
    timeout 180 '\
        if pgrep -x swaylock; then \
            ~/.config/sway/src/backend "enter_sleep";\
        fi\
    ' resume 'swaymsg "output * dpms on" && "~/.config/sway/src/weather --reload"'\
    timeout 300 '\
        if [[ $(playerctl status 2> /dev/null) != "Playing" ]]; then\
            ~/.config/sway/src/backend "lock_session";\
        fi\
    ' resume 'swaymsg "output * dpms on" && "~/.config/sway/src/weather --reload"'\
    timeout 315 '\
        if pgrep -x swaylock; then \
            swaymsg "output * dpms off"; \
        fi\
    ' resume 'swaymsg "output * dpms on" && "~/.config/sway/src/weather --reload"'\
    timeout 600 '\
        if pgrep -x swaylock; then \
            ~/.config/sway/src/backend "enter_sleep";\
        fi\
    '\
    timeout 1800 '\
        swaymsg "output * dpms off"; \
    ' resume 'swaymsg "output * dpms on" && "~/.config/sway/src/weather --reload"'

# This will lock your screen after 300 seconds of inactivity, then turn off
# your displays after another 300 seconds, and turn your screens back on when
# resumed. It will also lock your screen before your computer goes to sleep.

